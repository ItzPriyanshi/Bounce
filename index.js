const canvas=document.getElementById("c");const ctx=canvas.getContext("2d",{alpha:true,desynchronized:true});let dpr=1;let cw=0;let ch=0;let ringR=0;let ringW=0;let angle=0;let spin=0.6;let lastT=0;function fit(){dpr=window.devicePixelRatio||1;const r=canvas.getBoundingClientRect();canvas.width=Math.max(1,Math.floor(r.width*dpr));canvas.height=Math.max(1,Math.floor(r.height*dpr));cw=canvas.width;ch=canvas.height;ctx.setTransform(1,0,0,1,0,0);ctx.scale(dpr,dpr);const s=Math.min(r.width,r.height);ringR=s*0.36;ringW=s*0.04}fit();addEventListener("resize",fit,{passive:true});const ball={x:0,y:0,vx:0,vy:0,r:0,rest:0.82,spin:0};function init(){const r=Math.min(canvas.clientWidth,canvas.clientHeight)*0.04;ball.r=r;ball.x=canvas.clientWidth*0.5;ball.y=canvas.clientHeight*0.5-ringR*0.6;ball.vx=120*(Math.random()*2-1);ball.vy=60;ball.rest=0.86;ball.spin=0}init();function neonRing(cx,cy,rot){ctx.save();ctx.translate(cx,cy);ctx.rotate(rot);const lw=ringW;const r=ringR;ctx.lineWidth=lw;const g=ctx.createRadialGradient(0,0,r-lw*0.5,0,0,r+lw*1.8);g.addColorStop(0,"rgba(0,229,255,0.05)");g.addColorStop(0.55,"rgba(255,45,240,0.08)");g.addColorStop(1,"rgba(102,255,153,0.12)");ctx.strokeStyle=g;ctx.beginPath();ctx.arc(0,0,r,0,Math.PI*2);ctx.stroke();const sg=ctx.createLinearGradient(-r,0,r,0);sg.addColorStop(0,"#00e5ff");sg.addColorStop(0.5,"#ff2df0");sg.addColorStop(1,"#66ff99");ctx.shadowColor="#00e5ff";ctx.shadowBlur=25;ctx.strokeStyle=sg;ctx.beginPath();ctx.arc(0,0,r,0,Math.PI*2);ctx.stroke();ctx.shadowBlur=55;ctx.globalAlpha=0.35;ctx.beginPath();ctx.arc(0,0,r,0,Math.PI*2);ctx.stroke();ctx.restore()}function drawBall(x,y,r,ax){ctx.save();ctx.translate(x,y);ctx.rotate(ax*0.02);const grad=ctx.createRadialGradient(-r*0.3,-r*0.3, r*0.2,0,0,r);grad.addColorStop(0,"#ffffff");grad.addColorStop(0.2,"#d2f8ff");grad.addColorStop(0.7,"#6fe3ff");grad.addColorStop(1,"#00bcd4");ctx.fillStyle=grad;ctx.beginPath();ctx.arc(0,0,r,0,Math.PI*2);ctx.fill();ctx.globalCompositeOperation="lighter";ctx.shadowColor="#00e5ff";ctx.shadowBlur=30;ctx.beginPath();ctx.arc(0,0,r*1.04,0,Math.PI*2);ctx.strokeStyle="rgba(0,229,255,0.35)";ctx.lineWidth=2;ctx.stroke();ctx.globalCompositeOperation="source-over";ctx.restore()}function physics(dt){const g=980;ball.vy+=g*dt;ball.x+=ball.vx*dt;ball.y+=ball.vy*dt;const cx=canvas.clientWidth*0.5;const cy=canvas.clientHeight*0.5;const dx=ball.x-cx;const dy=ball.y-cy;const dist=Math.hypot(dx,dy);const maxDist=ringR-ball.r;if(dist>maxDist){const nX=dx/dist;const nY=dy/dist;ball.x=cx+nX*maxDist;ball.y=cy+nY*maxDist;const vDot=ball.vx*nX+ball.vy*nY;ball.vx-= (1+ball.rest)*vDot*nX;ball.vy-= (1+ball.rest)*vDot*nY;const tX=-nY;const tY=nX;const vt=ball.vx*tX+ball.vy*tY;const slip=0.96;const vtNew=vt*slip;ball.vx+= (vtNew-vt)*tX;ball.vy+= (vtNew-vt)*tY;ball.spin+=vtNew*0.02}const fAir=0.0008;ball.vx*=Math.exp(-fAir*dt*1000);ball.vy*=Math.exp(-fAir*dt*1000);ball.spin*=0.995}function clear(){ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,canvas.width,canvas.height);ctx.scale(dpr,dpr)}function frame(t){if(!lastT)lastT=t;let dt=(t-lastT)/1000;lastT=t;if(dt>0.033)dt=0.033;angle+=spin*dt;physics(dt);clear();const cx=canvas.clientWidth*0.5;const cy=canvas.clientHeight*0.5;neonRing(cx,cy,angle);drawBall(ball.x,ball.y,ball.r,ball.spin);requestAnimationFrame(frame)}requestAnimationFrame(frame)